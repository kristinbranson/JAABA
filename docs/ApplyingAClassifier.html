<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" type="text/css" charset="utf-8" media="all" 
href="styles/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" 
href="styles/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" 
href="styles/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" 
media="projection" href="styles/projection.css">

<style type="text/css">
strong.regular-font {
  font-family: Arial, Lucida Grande, sans-serif;
  font-style: italic;
  font-size: 0.9em;
}
</style>


</head>
</body>
<center><h1> Applying a <a href="index.html">JAABA</a> Classifier to a New Video</h1></center>

After you have <a href="Training.html">trained a behavior classifier</a>, 
there are several ways to apply it to automatically classify the behaviors
of all animals in novel videos. This can be done <a href="#UsingJAABA">within JAABA</a>, <a href="#UsingJAABAPlot">with JAABAPlot</a>, or from the MATLAB command-line using <a href="#JAABADetect">JAABADetect</a>. 

The classifier's automatic predictions for a given experiment are output
to a <a href="#ScoresFile">scores .mat file</a> within the experiment
directory. 

<hr class="h2-divider">

<h2>Contents</h2>
<ul>
<li></li>
</ul>

<hr class="h2-divider">

<h2><a id="ApplyingAClassifier">Applying a Behavior Classifier</a></h2>

<h3><a id="UsingJAABA">Using JAABA</a></h3>

Within JAABA, you can apply the classifier associated with the current <a href="NewProject.html">JAABA project</a> using the <b>Classifier->Predict</b> menu:
<ul>
<li><b>->Current Fly</b>: The entire trajectory of a single animal. The
predictions are <b>not</b> saved to a <a href="#ScoresFile">scores file</a>,
and are only viewable within the current JAABA session.</li>
<li><b>->Current Experiment</b>: All animals in the current experiment. Results <b>will</b> be store to a <a href="#ScoresFile">scores file</a>.</li>
<li><b>->All Experiments</b>: All experiments in the current project. Results <b>will</b> be store to <a href="#ScoresFile">scores files</a>.</li>
</ul>

<h3><a id="UsingJAABAPlot">Using JAABAPlot</a></h3>

You can use <a href="PlottingResults.html#LoadingClassifiers">JAABAPlot</a>
to apply behavior classifiers in batch to a set of experiments. As described
in <a href="PlottingResults.html">Plotting JAABA's Output</a>,
this can be done by 
<ul>
<li>Adding the experiment(s) of interest to JAABAPlot, see <a href="PlottingResults.html#LoadingExperiments">Loading Experiments</a> for more information.</li>
<li>Adding the classifier(s) of interest to JAABAPlot, see <a href="PlottingResults.html#LoadingClassifiers"</a> for more information. </li>
<li>Pushing the <b>Classify</b> button.</li>
</ul>

<h3><a id="JAABADetect">Using JAABADetect</a></h3>

From the MATLAB command-line, you can run the function <b>JAABADetect</b>
to classify input experiment(s) with input classifier(s). 

<hr class="h2-divider">

<h2><a id="LabelsAndClassifiers">Saving the Classifier, Labels, and Project Parameters</a></h2>

As described in <a href="NewProject.html">Creating a New Project</a>, all
data associated with a given behavior classifier is stored in a JAABA 
project file with the extension <b>.jab</b>, including the project 
parameters, classifier, and training data labels and locations. These 
can be saved to the current .jab file by selecting <b>File->Save</b> or 
to a new .jab file by selecting <b>File->Save As...</b>. 

<h3><a id="VersioningClassifiers">Creating Different Versions of a Behavior Classifier</a></h2>

We often find it useful to create different versions of a behavior
classifier. This can be thought of as creating a "restore point" that
we can go back to if we do not like the modifications to the classifier
we make. For example, we might do this if we have a classifier that is
working fairly well, but we want to see what happens if we add a new
type of data. To do this, we use the <b>File->Save As...</b> to create a
new .jab file. Then, we can go back to the previous .jab file if we are
unhappy with the changes we make. 

<hr class="h2-divider">

<h2><a id="Predictions">Classifier's Predictions</a></h2>

<h3><a id="SavingPredictions">Saving Predictions</a></h3>

<p>After training a classifier, the whole trajectory of a animal, the whole
experiment, or all the experiments can be classified by selecting one of the options under
the <b>Classifier -> Classify</b> menu, see 
<a href="Training.html#Predictions">Examining the Classifier's Predictions</a> 
for details. The classifier's predictions and raw output scores can be saved to a file for several 
of the options under this menu. The saved predictions can also be used as <b>input</b> for other projects.
<ul>
<li><b>Current animal</b>: Predicts the behavior for all frames for the current animal and allows the 
user to view these results within the current JAABA session, but does <b>not</b> save the predictions 
to a file. </li>
<li><b>Classifier -> Classify -> Current Experiment -> Don't Save</b>: Classifies all animals for the
current experiment/video, and allows the user to view these results within the current JAABA session,
but does <b>not</b> save the predictions to file. </li>
<li><b>Classifier -> Classify -> Current Experiment -> Save to default</b>: Classifies all animals for the
current experiment/video and saves to the <b>scores file</b> within the corresponding 
<a href="DataFormatting.html#ExperimentDirectoryStructure">experiment directory</a>. The name of the 
scores file within the experiment directory is the same for all experiments, and is specified during the
project setup as <b>Score/Output File Name</b>.</li> 
<li><b>Classifier -> Classify -> Current Experiment -> Save to different</b>: Classifies all animals for the
current experiment/video, then prompts the user for the location to save the scores to, and saves to this file.</li>
<b>Classifier -> Classify -> All Experiments -> Don't Save</b>: Classifies all animals for all experiments/videos, 
and allows the user to view these results within the current JAABA session, but does <b>not</b> save the 
predictions to file. </li>
<li><b>Classifier -> Classify -> All Experiments -> Save to default</b>: Classifies all animals for 
all experiments/videos, then saves to the <b>scores file</b> within each corresponding 
<a href="DataFormatting.html#ExperimentDirectoryStructure">experiment directory</a>. The name of the 
scores file within the experiment directory is the same for all experiments, and is specified during
the project setup by <b>Score/Output File Name</b>.</li> 
<li><b>Classifier -> Classify -> All Experiments -> Save to different</b>: Classifies all animals for 
all experiments/videos, then prompts the user for a filename that will be used for all experiments. The
classifier's predictions for each experment are stored into this selected filename within its 
corresponding <a href="DataFormatting.html#ExperimentDirectoryStructure">experiment directory</a>.</li>
</ul>

<!--- KB: not true anymore, right?
<p> The predictions computed using <b>Current Experiment</b> and <b>All Experiments</b> are shown at the 
bottom of the prediction timeline (the <b>Loaded</b> option in the drop down menu).  </p>
--->

<h3><a id="LoadingPredictions">Loading Predictions</a></h3>

<p> Previously saved predictions can be loaded from file into the current JAABA session. These loaded scores will be 
shown in the bottom portion of the Automatic Timeline if <b>Loaded</b> is selected from the pop-up menu 
on the left. Predictions can be loaded by selecting any of the options under the menu <b>File -> Load Scores</b>:
<ul>
<li> <b>File -> Load Scores -> For current experiment from default location</b>: Loads the scores for the current
experiment from the default scores file within its corresponding 
<a href="DataFormatting.html#ExperimentDirectoryStructure">experiment directory</a>. The name of the 
scores file within the experiment directory is the same for all experiments, and is specified 
during project setup as <b>Score/Output File Name</b>.</li> 
<li> <b>File -> Load Scores -> For current experiment from different location</b>: Prompts the user
for a file location, and loads the scores for the current experiment from that file.</li>
<li> <b>File -> Load Scores -> For all experiments from default location</b>: Loads the scores for all
experiments from the default scores file within each corresponding 
<a href="DataFormatting.html#ExperimentDirectoryStructure">experiment directory</a>. The name of the 
scores file within the experiment directory is the same for all experiments, and is specified
during project setup as <b>Score/Output File Name</b>.</li> 
</ul>
Options not mentioned above should not be used, and are there for backwards compatability purposes. 

</body>

<footer>
<hr class="h1-divider">
<center>
<a href="index.html">JAABA Documentation Home</a> | <a href="https://groups.google.com/forum/?fromgroups#!forum/jaaba">jaaba@googlegroups.com</a> | <i>Last Updated November 28, 2012</i>
</center>
</footer>


</html>
